<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.96652f6e649beada85dd.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(50%,transparent),color-stop(50%,rgba(69,142,209,.04)));background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.17.7"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Alk3my - Azure service principle for use with Terraform</title><link rel="icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><script>
            var clicky_site_ids = clicky_site_ids || [];
            clicky_site_ids.push(101219270);
          </script><script async="" type="text/javascript" src="//static.getclicky.com/js"></script><link as="script" rel="preload" href="/app-04b2cc8f2bbde2ee124b.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-d4a877ce87da7f1aeeba.js"/><link as="script" rel="preload" href="/styles-b36d26e0bd319d623cd5.js"/><link as="script" rel="preload" href="/commons-ffd0ae650f6f22855d4a.js"/><link as="script" rel="preload" href="/webpack-runtime-b60f1a090960404fc395.js"/><link as="fetch" rel="preload" href="/page-data\terraform-azure-service-principal\page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><header style="background:rebeccapurple;margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><h2 style="margin:0"><a style="color:white;text-decoration:none" href="/">Alk3my</a></h2></div></header><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main><div class="blog-post"><h1>Azure service principle for use with Terraform</h1><h2>October 29, 2019</h2><div class="blog-post-content"><p>In order to use the Azure provider with Terraform (and hence allow Terraform to create/alter/delete your environments) one approach is to set up a service principal and use that to authenticate via a client secret.</p>
<p>You can set up your principal either by command line or the Azure portal. I'll be covering the Azure portal approach as it's pretty straight forward.</p>
<ol>
<li>Log in to the portal (<a href="https://portal.azure.com">portal.azure.com</a>) and click on "Azure Active Directory".
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; margin:0; max-width: 270px;"
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 217.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Azure AD App registrations"
        title="Azure AD App registrations"
        src="/static/f2522eb5bd82b337d16963856c02e1fd/4ca17/azure-ad-app-registration.png"
        srcset="/static/f2522eb5bd82b337d16963856c02e1fd/2b3f6/azure-ad-app-registration.png 230w,
/static/f2522eb5bd82b337d16963856c02e1fd/4ca17/azure-ad-app-registration.png 270w"
        sizes="(max-width: 270px) 100vw, 270px"
        loading="lazy"
      />
    </span></li>
<li>Click on  "+ New Registration" and give it a meaningful name like "TerraformServicePrinciple". Leave "Supported account types" as is and set any Redirect URI with Web in the dropdown (e.g. <a href="https://terra.form">https://terra.form</a>).</li>
<li>Click "Register" button down the bottom and then select it from the All applications list.</li>
<li>At this point take note of a couple of things you'll need later, the client ID and the tenant ID as below. Then click on "Certificates &#x26; secrets".
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; margin:0; max-width: 588px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/bf2c696402f379572f7c0a80b860c23d/4214e/azure-ad-app-registration-details.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 67.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACo0lEQVQ4y32T228aVxCH9yGvfa4i5f+z2kpN0vYhUmupTfKfJH2wqGXXAht8k+MgHIiJwReEXAzBwGLY+5WLd/ly9hhbdZJ2pE8z5+ye3+ycmVWUJ2W+Wazy6OUJ3z4/4eGLE5SfP6A8LqP8eMiDZxUWUi2+/6spaPFdqskPy615fMHCUkP6p3+3+Wmtg/Jbps3LXIfnuS6/Z7v8Ifzieodn6Ut+WWvza+aSpfc9/sxf8OptQ/rXc5bLKitHV5K16kCi1FSbqW+iDfqY2gBTHxLYOsbwZh24NsymXIcu04TAvYkDR+5DLIjuUHYvHFzXYzDUGGqa9Lf0r66wbIcZX7coTpjdQ4mnI3w/IAgCRuMxcRyLB7H019fXzGYzDH+MZeh44ZiuFcrY97257OweysCw0LUhhq7jOja+50o8Qei7dPQpS6URhw2X47bPh6ZHpelS/ehx0g4EvuRYrKstD6X+sUu33ULtdXBsE9s0sK0bHFNDNUa8qfmctSzqbYtmP5A01IDznsc/El/GDdVH8T0Py7KwbfuLO0rKTQimEfY4xhM9mIj9IOY/TbFMU97drcC/xRKbiETFgxJ7+QKFdyWK78ucX7S47HSo1WpcicbF88QJSk/coSsOTSYTuRFFEbEg8Ynk2HHY2dwknU6T3dhgfT1DJpNmQ8RbW1vU63XZwDvBphOiD4fohsk0iu59ocwchvR7KutCIBFNpVKsrK6SzWbZ39+X15V8zO0ZZVg9RDuq0C+XMUW2kaoSGYaY15uskUDt9zk4OKBYLMoyK5UKhUKBnZ0dzs7OZDV3guNKAb1yjCEErVIJTbw0Ep55CckshmJGT09P2d7eJpfLsbu7Sz6fZ29vT4rfE3TCEUljdDGH1medlmXH/9PSucXzHyHhE0GG/fMtjZw0AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Azure AD App registration details"
        title="Azure AD App registration details"
        src="/static/bf2c696402f379572f7c0a80b860c23d/4214e/azure-ad-app-registration-details.png"
        srcset="/static/bf2c696402f379572f7c0a80b860c23d/2b3f6/azure-ad-app-registration-details.png 230w,
/static/bf2c696402f379572f7c0a80b860c23d/a9ee3/azure-ad-app-registration-details.png 460w,
/static/bf2c696402f379572f7c0a80b860c23d/4214e/azure-ad-app-registration-details.png 588w"
        sizes="(max-width: 588px) 100vw, 588px"
        loading="lazy"
      />
  </a>
    </span></li>
<li>Now we create a Client Secret by clicking into "Certificates &#x26; secrets" and then "+ New client secret".</li>
<li>Give it a meaningful description / name and pick an expiry date (I'd go with one year for better security in case you accidentally expose the secret somewhere).</li>
<li>Take note of the client secret and put it somewhere safe like a password vault / manager as you can't retrieve it again (although you can always generate a new secret).</li>
</ol>
<p>At this point you've got your service principal and some credentials however you need to grant it permissions to modify resources in your subscription.</p>
<ol>
<li>Go to the "Subscriptions" blade in the portal and choose your subscription (assuming you've got more than one).</li>
<li>In the overview taken note of your "Subscription ID", this is the final bit of info you need when running Terraform.</li>
<li>Click on "Access control (IAM)" and then "Add a role assignment".</li>
<li>Choose a Role, in most cases you'll need "Contributor" for Read/Write on all resources in the Subscription although you may want to drop this down to a lesser role for security later (e.g. Website Contributor).</li>
<li>Search for your Service Principal and then Save.</li>
</ol>
<p>Now you're set to use this Principal when you set up your provider in Terraform.</p>
<p>I usually create an "environment" folder at the root of the repository and then perhaps folders for dev, test, prod etc. You might even have folders per cloud provider if you're using multi-cloud resources. Add a <code class="language-text">provider.tf</code> file with the following content.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">variable<span class="token type variable"> "client_secret" </span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">provider<span class="token type variable"> "azurerm" </span></span><span class="token punctuation">{</span>
  <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"~> 1.36"</span>
  <span class="token property">subscription_id</span>             <span class="token punctuation">=</span> <span class="token string">"00000000-0000-0000-0000-000000000000"</span>
  <span class="token property">client_id</span>                   <span class="token punctuation">=</span> <span class="token string">"00000000-0000-0000-0000-000000000000"</span>
  <span class="token property">client_secret</span>               <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">client_secret</span><span class="token punctuation">}</span></span>"</span>
  <span class="token property">tenant_id</span>                   <span class="token punctuation">=</span> <span class="token string">"00000000-0000-0000-0000-000000000000"</span>
  <span class="token property">skip_provider_registration</span>  <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">skip_provider_registration</code> bit is optional and more if you're a bit pedantic like me. Essentially you're telling Terraform to skip registering a bunch of Resource providers. It tends to do as many as it can whereas you might only be creating a small subset of resources. Although it does mean you have to do the registrations manually which can be annoying and tedious (as well as giving less meaningful error messages). More <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-register-provider-errors">details provided here</a>.</p>
<p>At this point you should be able to initialise Terraform with <code class="language-text">terraform init</code>.</p>
<p>Terraform also provide a <a href="https://www.terraform.io/docs/providers/azurerm/auth/service_principal_client_secret.html">detailed explanation</a> and how to do this process using the Azure CLI.</p></div></div></main><footer>Â© <!-- -->2020<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/terraform-azure-service-principal";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-04b2cc8f2bbde2ee124b.js"],"component---src-templates-post-js":["/component---src-templates-post-js-d4a877ce87da7f1aeeba.js"],"component---src-pages-404-js":["/component---src-pages-404-js-72e1d304df32c3842c4e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a66c07ff6121949299b5.js"]};/*]]>*/</script><script src="/webpack-runtime-b60f1a090960404fc395.js" async=""></script><script src="/commons-ffd0ae650f6f22855d4a.js" async=""></script><script src="/styles-b36d26e0bd319d623cd5.js" async=""></script><script src="/component---src-templates-post-js-d4a877ce87da7f1aeeba.js" async=""></script><script src="/app-04b2cc8f2bbde2ee124b.js" async=""></script></body></html>